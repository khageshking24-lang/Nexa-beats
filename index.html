<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nexa Security Test | Khagesh ai-nexa</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background: #0f172a; color: white; font-family: sans-serif; }
        .hidden { display: none !important; }
        #activationScreen { position: fixed; inset: 0; background: #0f172a; z-index: 100; display: flex; align-items: center; justify-content: center; }
    </style>
</head>
<body class="p-6">

    <div id="activationScreen">
        <div class="text-center w-full max-w-xs p-6 bg-white/5 rounded-3xl border border-white/10">
            <h1 class="text-xl font-bold mb-6 text-purple-400">NEXA SECURITY LOCK</h1>
            <p id="errorMsg" class="text-rose-500 text-[10px] mb-4 font-bold uppercase"></p>
            <input type="text" id="licenseKey" placeholder="Enter Key" class="w-full p-4 rounded-xl bg-white/10 border border-white/20 mb-4 text-center outline-none">
            <button onclick="checkKey()" class="w-full bg-purple-600 p-4 rounded-xl font-bold uppercase active:scale-95 transition">Verify Key</button>
        </div>
    </div>

    <div id="mainApp" class="hidden">
        <div class="flex justify-between items-center mb-6">
            <h1 class="text-xl font-black italic text-purple-400 italic">MUSIC PRO</h1>
            <p id="trialBanner" class="text-[10px] bg-orange-500/20 text-orange-400 px-3 py-1 rounded-full font-bold"></p>
        </div>
        <div class="p-10 bg-white/5 rounded-3xl border border-white/10 text-center">
            <p class="text-sm opacity-60">Trial active for 15 seconds...</p>
            <p id="timerDisplay" class="text-3xl font-black mt-4 text-purple-400">00</p>
        </div>
    </div>

    <script>
        const MASTER_KEY = "Permanentkey63793119";
        const TRIAL_KEY = "TRIAL123";
        const TRIAL_DURATION_MS = 15 * 1000; // SIRF 15 SECOND TEST KE LIYE

        function checkKey() {
            const val = document.getElementById('licenseKey').value.trim();
            const now = Date.now();

            if (val === MASTER_KEY) {
                localStorage.setItem('nexa_auth_status', 'PERMANENT');
                location.reload(); // Refresh to apply
            } else if (val === TRIAL_KEY) {
                // Agar pehle se trial start nahi hua, toh ab karo
                if (!localStorage.getItem('nexa_trial_start_time')) {
                    localStorage.setItem('nexa_trial_start_time', now);
                }
                localStorage.setItem('nexa_auth_status', 'TRIAL');
                location.reload();
            } else { alert("Invalid Key!"); }
        }

        function validateTrial() {
            const auth = localStorage.getItem('nexa_auth_status');
            const startTime = localStorage.getItem('nexa_trial_start_time');
            const now = Date.now();

            if (!auth) return; // Login screen pe hi raho

            if (auth === 'TRIAL' && startTime) {
                const elapsed = now - parseInt(startTime);
                const timeLeft = TRIAL_DURATION_MS - elapsed;

                if (timeLeft <= 0) {
                    // TRIAL KHATAM! Sab clear karo aur lock screen dikhao
                    localStorage.removeItem('nexa_auth_status');
                    document.getElementById('mainApp').classList.add('hidden');
                    document.getElementById('activationScreen').classList.remove('hidden');
                    document.getElementById('errorMsg').innerText = "Trial Expired! Buy Permanent Key";
                    return false;
                }
                
                // Banner update karo
                const secondsLeft = Math.ceil(timeLeft / 1000);
                document.getElementById('trialBanner').innerText = `LOCKING IN: ${secondsLeft}s`;
                if(document.getElementById('timerDisplay')) document.getElementById('timerDisplay').innerText = secondsLeft;
                return true;
            }
            
            if (auth === 'PERMANENT') {
                document.getElementById('trialBanner').innerText = "LIFETIME UNLOCKED";
                document.getElementById('trialBanner').classList.replace('text-orange-400', 'text-emerald-400');
                return true;
            }
        }

        // Ye function har 1 second mein check karega (Real-time Monitoring)
        setInterval(() => {
            if (localStorage.getItem('nexa_auth_status') === 'TRIAL') {
                validateTrial();
            }
        }, 1000);

        window.onload = () => {
            if (validateTrial()) {
                document.getElementById('activationScreen').classList.add('hidden');
                document.getElementById('mainApp').classList.remove('hidden');
            }
        };
    </script>
</body>
</html>
